<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Dream OS — Distribute</title>
  <link rel="stylesheet" href="dreamos.css">

  <style>
    /* ===== Page layout ===== */
    .content{ margin-top: 14px; }

    .dist-grid{
      display:grid;
      grid-template-columns: 1.05fr 0.95fr;
      gap: 14px;
      align-items:start;
    }
    @media (max-width: 980px){
      .dist-grid{ grid-template-columns: 1fr; }
    }

    /* ===== Field styling (same family as login/new collection) ===== */
    .field{
      border: 1px solid rgba(255,255,255,0.10);
      background: rgba(255,255,255,0.03);
      border-radius: 16px;
      padding: 12px;
      display:flex;
      flex-direction:column;
      gap: 8px;
    }
    .label{
      font-size: 11px;
      letter-spacing:.10em;
      text-transform: uppercase;
      color: var(--muted2);
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
    }
    .hint{
      font-family: var(--mono);
      font-size: 11px;
      color: rgba(255,255,255,0.35);
      letter-spacing: .02em;
      text-transform:none;
    }
    input, textarea, select{
      width:100%;
      border: 1px solid rgba(255,255,255,0.10);
      background: rgba(255,255,255,0.02);
      border-radius: 14px;
      padding: 10px 12px;
      color: var(--text);
      outline:none;
      font-size: 14px;
      font-family: var(--sans);
    }
    textarea{ min-height: 90px; resize: vertical; }

    .two{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
    }
    @media (max-width: 520px){
      .two{ grid-template-columns: 1fr; }
    }

    /* ===== Connectors grid ===== */
    .connectors{
      display:grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 12px;
    }
    @media (max-width: 520px){
      .connectors{ grid-template-columns: 1fr; }
    }

    .connector{
      border: 1px solid rgba(255,255,255,0.08);
      background: rgba(255,255,255,0.02);
      border-radius: 18px;
      padding: 14px;
      box-shadow: 0 18px 60px rgba(0,0,0,0.28);
      display:flex;
      flex-direction:column;
      gap: 10px;
      transition: transform .12s ease, border-color .12s ease, background .12s ease;
    }
    .connector:hover{
      transform: translateY(-1px);
      border-color: rgba(180,207,106,0.28);
      background: rgba(180,207,106,0.05);
    }

    .cTop{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 12px;
    }
    .cBrand{
      display:flex;
      align-items:center;
      gap: 10px;
      min-width:0;
    }
    .cIcon{
      width: 40px;
      height: 40px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,0.12);
      background:
        radial-gradient(380px 160px at 35% 30%, rgba(180,207,106,0.16), transparent 65%),
        rgba(255,255,255,0.03);
      display:flex;
      align-items:center;
      justify-content:center;
      color: rgba(255,255,255,0.82);
    }
    .cIcon svg{ width: 18px; height: 18px; stroke: rgba(255,255,255,0.86); }

    .cName{
      display:flex;
      flex-direction:column;
      gap: 2px;
      min-width:0;
    }
    .cName strong{
      color: var(--text-2);
      font-size: 13px;
      font-weight: 950;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }
    .cName span{
      color: rgba(255,255,255,0.42);
      font-size: 11px;
      font-family: var(--mono);
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }

    .statusPill{
      font-family: var(--mono);
      font-size: 11px;
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.10);
      background: rgba(255,255,255,0.02);
      color: rgba(255,255,255,0.65);
      flex: 0 0 auto;
    }
    .statusPill.on{
      border-color: rgba(180,207,106,0.45);
      background: rgba(180,207,106,0.10);
      color: rgba(255,255,255,0.85);
    }
    .statusPill.soon{
      border-color: rgba(255,255,255,0.10);
      background: rgba(255,255,255,0.02);
      color: rgba(255,255,255,0.45);
    }

    .cBody{
      color: var(--muted);
      font-size: 12px;
      line-height: 1.55;
    }

    .cActions{
      display:flex;
      gap: 10px;
      margin-top: 2px;
    }
    .cActions .btn{
      flex: 1;
      justify-content:center;
      width:auto;
    }
    @media (max-width: 520px){
      .cActions{ flex-direction:column; }
      .cActions .btn{ width:100%; }
    }

    /* ===== Queue list ===== */
    .queue{
      display:flex;
      flex-direction:column;
      gap: 10px;
    }
    .qItem{
      border: 1px solid rgba(255,255,255,0.08);
      background: rgba(255,255,255,0.02);
      border-radius: 16px;
      padding: 12px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 12px;
      transition: transform .12s ease, border-color .12s ease, background .12s ease;
    }
    .qItem:hover{
      transform: translateY(-1px);
      border-color: rgba(180,207,106,0.28);
      background: rgba(180,207,106,0.05);
    }
    .qLeft{
      min-width:0;
      display:flex;
      flex-direction:column;
      gap: 4px;
    }
    .qTitle{
      font-weight: 950;
      color: var(--text-2);
      font-size: 13px;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }
    .qMeta{
      font-family: var(--mono);
      font-size: 11px;
      color: rgba(255,255,255,0.45);
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }
    .qRight{
      display:flex;
      align-items:center;
      gap: 8px;
      flex: 0 0 auto;
    }

    .iconBtn{
      width: 38px; height: 38px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,0.10);
      background: rgba(255,255,255,0.03);
      display:flex;
      align-items:center;
      justify-content:center;
      cursor:pointer;
      transition: transform .12s ease, border-color .12s ease, background .12s ease;
    }
    .iconBtn:hover{
      transform: translateY(-1px);
      border-color: var(--stroke-2);
      background: rgba(255,255,255,0.05);
    }
    .iconBtn svg{ width: 18px; height: 18px; stroke: rgba(255,255,255,0.80); }

    /* ===== Primary action row ===== */
    .mintActions{
      margin-top: 10px;
      display:flex;
      gap: 10px;
    }
    .mintActions .btn{ flex: 1; justify-content:center; }
    @media (max-width: 520px){
      .mintActions{ flex-direction:column; }
      .mintActions .btn{ width:100%; }
    }

  </style>
</head>

<body>
  <div class="app">
    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
      <div class="brand">
        <div class="orb"></div>
        <div class="brandText">
          <strong>Dream OS</strong>
          <span>Internal studio console</span>
        </div>
      </div>

      <nav class="nav" aria-label="Primary">
        <a href="dashboard.html"><span>Dashboard</span><small>01</small></a>
        <a href="new_artwork.html"><span>Create</span><small>02</small></a>
        <a href="new_collection.html"><span>Collections</span><small>03</small></a>
        <a class="active" href="distribute.html"><span>Distribute</span><small>04</small></a>
      </nav>

      <div class="sidebar-footer">
        <button class="logout-btn" type="button" onclick="alert('Hook logout');">
          <span>Logout</span><small>Esc</small>
        </button>
      </div>
    </aside>

    <!-- Scrim for mobile -->
    <div class="scrim" id="scrim" onclick="toggleSidebar(false)"></div>

    <!-- Main -->
    <main class="main">
      <!-- Topbar -->
      <div class="topbar">
        <div class="topLeft">
          <button class="burger" id="burger" aria-label="Open menu" onclick="toggleSidebar()">
            <svg viewBox="0 0 24 24" fill="none">
              <path d="M5 7h14M5 12h14M5 17h14" stroke-width="1.8" stroke-linecap="round"/>
            </svg>
          </button>

          <div class="crumbs">
            <div class="kicker">Distribution</div>
            <div class="title">Connect · Mint · Publish</div>
          </div>
        </div>

        <div class="topRight">
          <div class="pill">Build: v0.1</div>
          <button class="btn primary" type="button" onclick="alert('Hook: open mint queue');">
            <span class="dot"></span>Queue
          </button>
        </div>
      </div>

      <div class="content">

        <!-- CONNECTORS -->
        <section class="panel">
          <div class="head">
            <h2>Marketplaces</h2>
            <div class="pill">Connect once, ship everywhere</div>
          </div>

          <div class="body">
            <div class="connectors">

              <!-- XRP Cafe -->
              <div class="connector" data-market="xrpcafe">
                <div class="cTop">
                  <div class="cBrand">
                    <div class="cIcon" aria-hidden="true">
                      <svg viewBox="0 0 24 24" fill="none">
                        <path d="M7 7h10M7 12h10M7 17h10" stroke-width="1.8" stroke-linecap="round"/>
                      </svg>
                    </div>
                    <div class="cName">
                      <strong>XRP Café</strong>
                      <span>XRPL mint + listings</span>
                    </div>
                  </div>
                  <div class="statusPill on" id="st-xrpcafe">connected</div>
                </div>
                <div class="cBody">Primary rail for Dream Agent drops. Supports collections and editions.</div>
                <div class="cActions">
                  <button class="btn" type="button" onclick="disconnect('xrpcafe')">Disconnect</button>
                  <button class="btn primary" type="button" onclick="manage('xrpcafe')"><span class="dot"></span>Manage</button>
                </div>
              </div>

              <!-- OpenSea -->
              <div class="connector" data-market="opensea">
                <div class="cTop">
                  <div class="cBrand">
                    <div class="cIcon" aria-hidden="true">
                      <svg viewBox="0 0 24 24" fill="none">
                        <path d="M12 3l7 7-7 11-7-11 7-7Z" stroke-width="1.8" stroke-linejoin="round"/>
                      </svg>
                    </div>
                    <div class="cName">
                      <strong>OpenSea</strong>
                      <span>Ethereum / Polygon</span>
                    </div>
                  </div>
                  <div class="statusPill" id="st-opensea">not connected</div>
                </div>
                <div class="cBody">Connect a wallet to publish on EVM chains with optional royalties.</div>
                <div class="cActions">
                  <button class="btn primary" type="button" onclick="connect('opensea')"><span class="dot"></span>Connect</button>
                  <button class="btn" type="button" onclick="alert('Docs link placeholder');">Docs</button>
                </div>
              </div>

              <!-- Manifold -->
              <div class="connector" data-market="manifold">
                <div class="cTop">
                  <div class="cBrand">
                    <div class="cIcon" aria-hidden="true">
                      <svg viewBox="0 0 24 24" fill="none">
                        <path d="M6 18V6l6 6 6-6v12" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/>
                      </svg>
                    </div>
                    <div class="cName">
                      <strong>Manifold</strong>
                      <span>Contract-based drops</span>
                    </div>
                  </div>
                  <div class="statusPill soon" id="st-manifold">coming soon</div>
                </div>
                <div class="cBody">For custom contracts, claim pages, and drop mechanics. (Stub UI)</div>
                <div class="cActions">
                  <button class="btn" type="button" onclick="alert('Coming soon');">Notify</button>
                  <button class="btn" type="button" onclick="alert('Coming soon');">Learn</button>
                </div>
              </div>

              <!-- SuperRare -->
              <div class="connector" data-market="superrare">
                <div class="cTop">
                  <div class="cBrand">
                    <div class="cIcon" aria-hidden="true">
                      <svg viewBox="0 0 24 24" fill="none">
                        <path d="M12 21s-7-4.5-7-11a4 4 0 0 1 7-2 4 4 0 0 1 7 2c0 6.5-7 11-7 11Z" stroke-width="1.8" stroke-linejoin="round"/>
                      </svg>
                    </div>
                    <div class="cName">
                      <strong>SuperRare</strong>
                      <span>1/1 curation</span>
                    </div>
                  </div>
                  <div class="statusPill soon" id="st-superrare">coming soon</div>
                </div>
                <div class="cBody">Curation-first pipeline. Keep drafts here until approved.</div>
                <div class="cActions">
                  <button class="btn" type="button" onclick="alert('Coming soon');">Notify</button>
                  <button class="btn" type="button" onclick="alert('Coming soon');">Learn</button>
                </div>
              </div>

            </div>
          </div>
        </section>

        <!-- MINT + QUEUE -->
        <div class="dist-grid">

          <!-- LEFT: Mint / Publish form -->
          <section class="panel">
            <div class="head">
              <h2>Mint / Publish</h2>
              <div class="pill">Draft → chain → listing</div>
            </div>

            <div class="body" style="display:flex; flex-direction:column; gap:12px;">
              <div class="field">
                <div class="label">Artwork <span class="hint">Select draft</span></div>
                <select id="artwork">
                  <option>Dream Agent Distilleries (Draft)</option>
                  <option>The Soap Wars (Draft)</option>
                  <option>Temple of Openings (Draft)</option>
                </select>
              </div>

              <div class="two">
                <div class="field">
                  <div class="label">Collection <span class="hint">Optional</span></div>
                  <select id="collection">
                    <option value="">None</option>
                    <option>War & Feast</option>
                    <option>Signals & Ascensions</option>
                    <option>Industrial Scriptures</option>
                  </select>
                </div>
                <div class="field">
                  <div class="label">Marketplace <span class="hint">Connected only</span></div>
                  <select id="market">
                    <option value="xrpcafe">XRP Café (XRPL)</option>
                    <option value="opensea">OpenSea (EVM)</option>
                  </select>
                </div>
              </div>

              <div class="two">
                <div class="field">
                  <div class="label">Edition size <span class="hint">1 = one-of-one</span></div>
                  <input id="edition" type="number" min="1" value="1" />
                </div>
                <div class="field">
                  <div class="label">Royalties % <span class="hint">EVM dependent</span></div>
                  <input id="royalties" type="number" min="0" max="25" step="0.5" value="10" />
                </div>
              </div>

              <div class="two">
                <div class="field">
                  <div class="label">Price <span class="hint">Listing</span></div>
                  <input id="price" type="text" placeholder="e.g. 125 XRP or 0.08 ETH" />
                </div>
                <div class="field">
                  <div class="label">Sale type <span class="hint">Default</span></div>
                  <select id="saleType">
                    <option value="fixed" selected>Fixed</option>
                    <option value="auction">Auction</option>
                    <option value="open">Open edition window</option>
                  </select>
                </div>
              </div>

              <div class="field">
                <div class="label">Notes <span class="hint">Internal</span></div>
                <textarea id="notes" placeholder="Collector text locked. Cover verified. Ready to mint."></textarea>
              </div>

              <div class="mintActions">
                <button class="btn primary" type="button" onclick="queueMint()">
                  <span class="dot"></span>Add to Queue
                </button>
                <button class="btn" type="button" onclick="dryRun()">Dry run</button>
              </div>
            </div>
          </section>

          <!-- RIGHT: Queue / activity -->
          <section class="panel">
            <div class="head">
              <h2>Queue</h2>
              <div class="pill">Live ops</div>
            </div>

            <div class="body">
              <div class="queue" id="queue">
                <div class="qItem">
                  <div class="qLeft">
                    <div class="qTitle">The Soap Wars</div>
                    <div class="qMeta">xrpcafe · edition 1 · fixed · 125 XRP</div>
                  </div>
                  <div class="qRight">
                    <div class="statusPill on">ready</div>
                    <button class="iconBtn" type="button" onclick="alert('Open');" aria-label="Open">
                      <svg viewBox="0 0 24 24" fill="none">
                        <path d="M9 18l6-6-6-6" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/>
                      </svg>
                    </button>
                  </div>
                </div>

                <div class="qItem">
                  <div class="qLeft">
                    <div class="qTitle">Dream Agent Distilleries</div>
                    <div class="qMeta">opensea · edition 1 · fixed · 0.08 ETH</div>
                  </div>
                  <div class="qRight">
                    <div class="statusPill">draft</div>
                    <button class="iconBtn" type="button" onclick="alert('Open');" aria-label="Open">
                      <svg viewBox="0 0 24 24" fill="none">
                        <path d="M9 18l6-6-6-6" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/>
                      </svg>
                    </button>
                  </div>
                </div>

                <div class="qItem">
                  <div class="qLeft">
                    <div class="qTitle">Temple of Openings</div>
                    <div class="qMeta">xrpcafe · edition 10 · open edition</div>
                  </div>
                  <div class="qRight">
                    <div class="statusPill soon">pending</div>
                    <button class="iconBtn" type="button" onclick="alert('Open');" aria-label="Open">
                      <svg viewBox="0 0 24 24" fill="none">
                        <path d="M9 18l6-6-6-6" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/>
                      </svg>
                    </button>
                  </div>
                </div>

              </div>
            </div>
          </section>

        </div>
      </div>
    </main>
  </div>

  <script>
    // Sidebar toggle (matches your burger/scrim pattern)
    function toggleSidebar(force){
      const sidebar = document.getElementById('sidebar');
      const scrim = document.getElementById('scrim');
      const burger = document.getElementById('burger');

      const willOpen = (typeof force === 'boolean') ? force : !sidebar.classList.contains('open');

      sidebar.classList.toggle('open', willOpen);
      scrim.classList.toggle('show', willOpen);
      burger.classList.toggle('active', willOpen);
    }

    // Connector stubs
    function connect(m){
      document.getElementById('st-' + m).textContent = 'connected';
      document.getElementById('st-' + m).classList.add('on');
      alert('Hook: OAuth / wallet connect for ' + m);
    }
    function disconnect(m){
      document.getElementById('st-' + m).textContent = 'not connected';
      document.getElementById('st-' + m).classList.remove('on');
      alert('Hook: revoke token for ' + m);
    }
    function manage(m){
      alert('Hook: manage connection settings for ' + m);
    }

    // Mint stubs
    function dryRun(){
      const payload = readForm();
      alert('Dry run (no mint)\n\n' + JSON.stringify(payload, null, 2));
    }

    function queueMint(){
      const payload = readForm();
      addQueueItem(payload);
      alert('Hook: POST /api/mint/queue\n\n' + JSON.stringify(payload, null, 2));
    }

    function readForm(){
      return {
        artwork: document.getElementById('artwork').value,
        collection: document.getElementById('collection').value || null,
        marketplace: document.getElementById('market').value,
        edition: document.getElementById('edition').value,
        royalties: document.getElementById('royalties').value,
        price: document.getElementById('price').value,
        saleType: document.getElementById('saleType').value,
        notes: document.getElementById('notes').value
      };
    }

    function addQueueItem(p){
      const queue = document.getElementById('queue');

      const item = document.createElement('div');
      item.className = 'qItem';
      item.innerHTML = `
        <div class="qLeft">
          <div class="qTitle">${escapeHtml(p.artwork)}</div>
          <div class="qMeta">${escapeHtml(p.marketplace)} · edition ${escapeHtml(String(p.edition))} · ${escapeHtml(p.saleType)} · ${escapeHtml(p.price || '—')}</div>
        </div>
        <div class="qRight">
          <div class="statusPill">draft</div>
          <button class="iconBtn" type="button" aria-label="Open">
            <svg viewBox="0 0 24 24" fill="none">
              <path d="M9 18l6-6-6-6" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
        </div>
      `;
      queue.prepend(item);
    }

    function escapeHtml(str){
      return String(str)
        .replaceAll('&','&amp;')
        .replaceAll('<','&lt;')
        .replaceAll('>','&gt;')
        .replaceAll('"','&quot;')
        .replaceAll("'","&#039;");
    }
  </script>
</body>
</html>
